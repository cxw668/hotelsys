# 前端开发文档

## 1. 项目概述

本项目前端基于 `vue-element-admin` 框架进行精简和二次开发，旨在构建一套轻量级、响应式的酒店管理系统后台。

### 技术栈
- **核心框架**: Vue 2.6.x
- **UI 组件库**: Element UI 2.13.x
- **状态管理**: Vuex 3.x (使用模块化管理，核心模块 `hotel`)
- **路由管理**: Vue Router 3.x
- **HTTP 客户端**: Axios
- **构建工具**: Vue CLI
- **图表库**: ECharts (用于 Dashboard 和 Stats 页面)

## 2. 目录结构

精简后的核心目录结构如下：

```
src/
├── api/                # API 接口定义
├── assets/             # 静态资源
├── components/         # 公共组件
├── layout/             # 布局组件 (Sidebar, Navbar, TagsView)
├── router/             # 路由配置
│   └── index.js        # 主路由文件 (包含 12 个业务模块路由)
├── store/              # Vuex 状态管理
│   ├── modules/
│   │   └── hotel.js    # 核心业务模块 (包含所有业务实体的 CRUD 和 Dashboard 数据)
├── utils/              # 工具函数 (request.js, validate.js 等)
├── views/              # 页面视图
│   ├── dashboard/      # 首页仪表盘 (已适配酒店业务指标)
│   ├── login/          # 登录页
│   ├── rooms/          # 客房管理
│   ├── stats/          # 经营数据统计
│   ├── reservations/   # 客房预订
│   ├── customers/      # 客户信息管理
│   ├── orders/         # 订单管理
│   ├── employees/      # 员工管理
│   ├── pricing-policies/# 价格策略管理
│   ├── checkouts/      # 退房结算
│   ├── room-cleaning-statuses/ # 客房清洁状态
│   ├── complaints/     # 投诉报修
│   ├── inventories/    # 库存物资管理
│   └── memberships/    # 会员管理
├── App.vue             # 入口组件
└── main.js             # 入口 JS
```

## 3. 功能模块设计

系统包含 12 个核心业务模块，所有模块均已接入 Vuex `hotel` 模块进行状态管理，并实现了中文本地化。

### 1. 客房管理 (Room Management)
- **路径**: `/rooms`
- **功能**: 展示客房列表，支持按房号、房型、状态筛选；提供新增客房、编辑房态、删除客房功能。
- **数据源**: Vuex `hotel/rooms`

### 2. 经营数据统计 (Business Stats)
- **路径**: `/stats`
- **功能**: 展示每日经营数据列表；提供可视化图表（近7天营收趋势）；支持数据录入和修正。
- **数据源**: Vuex `hotel/stats`

### 3. 客房预订 (Reservations)
- **路径**: `/reservations`
- **功能**: 处理预订请求，查看预订记录，支持预订状态变更（确认、取消）。
- **数据源**: Vuex `hotel/reservations`

### 4. 客户信息管理 (Customer Management)
- **路径**: `/customers`
- **功能**: 维护入住客户档案，记录身份证号、联系方式等信息。
- **数据源**: Vuex `hotel/customers`

### 5. 订单管理 (Orders)
- **路径**: `/orders`
- **功能**: 管理入住订单，关联客房与客户，处理订单状态流转。
- **数据源**: Vuex `hotel/orders`

### 6. 员工管理 (Employee Management)
- **路径**: `/employees`
- **功能**: 员工信息维护，排班管理（可选）。
- **数据源**: Vuex `hotel/employees`

### 7. 价格策略管理 (Pricing Policies)
- **路径**: `/pricing-policies`
- **功能**: 设定不同房型在平日、周末、节假日的价格策略。
- **数据源**: Vuex `hotel/pricingPolicies`

### 8. 退房结算 (Checkouts)
- **路径**: `/checkouts`
- **功能**: 办理退房手续，计算最终费用，生成账单。
- **数据源**: Vuex `hotel/checkouts`

### 9. 客房清洁状态 (Room Cleaning Status)
- **路径**: `/room-cleaning-statuses`
- **功能**: 房务人员更新客房清洁状态（待扫、打扫中、已净）。
- **数据源**: Vuex `hotel/roomCleaningStatuses`

### 10. 投诉报修 (Complaints)
- **路径**: `/complaints`
- **功能**: 记录和处理客户投诉及设施报修请求。
- **数据源**: Vuex `hotel/complaints`

### 11. 库存物资管理 (Inventory Management)
- **路径**: `/inventories`
- **功能**: 酒店易耗品（洗漱用品、布草等）的入库、出库及库存盘点。
- **数据源**: Vuex `hotel/inventories`

### 12. 会员管理 (Membership Management)
- **路径**: `/memberships`
- **功能**: 会员等级、积分管理及会员权益配置。
- **数据源**: Vuex `hotel/memberships`

## 4. 状态管理 (Vuex)

本项目使用 Vuex 的 `hotel` 模块集中管理所有业务数据。

**核心文件**: `src/store/modules/hotel.js`

**通用 Mutation**:
- `SET_DATA`: 设置列表数据
- `ADD_ITEM`: 添加单条数据（包含模拟 ID 生成）
- `UPDATE_ITEM`: 更新单条数据
- `DELETE_ITEM`: 删除单条数据

**Dashboard Getters**:
- `totalRooms`, `occupiedRooms`, `availableRooms`
- `todayCheckIns`, `todayRevenue`
- `roomStatusDistribution` (饼图数据)
- `roomTypeDistribution` (柱状图数据)
- `latestOrders` (最新交易记录)

## 5. 接口调用与数据流

页面通过 Vuex Actions 与后端 API 交互，数据变更后自动更新 State，触发视图重绘。

**开发模式**:
- 当前阶段使用 **Mock 数据** + **前端过滤**。
- `api/` 目录下的文件负责请求数据（目前指向本地 JSON 或 Mock 接口）。
- `store/modules/hotel.js` 中的 Actions (`getRooms`, `addRoom` 等) 封装了 API 调用。

**页面调用示例:**

```javascript
import { mapState, mapActions } from 'vuex'

export default {
  computed: {
    ...mapState('hotel', ['rooms']) // 映射 State
  },
  created() {
    this.getList()
  },
  methods: {
    ...mapActions('hotel', ['getRooms', 'addRoom', 'updateRoom', 'deleteRoom']), // 映射 Actions
    
    async getList() {
      if (this.rooms.length === 0) {
        await this.getRooms() // 仅当 State 为空时请求
      }
      this.filterData() // 前端过滤
    },
    
    filterData() {
      // 基于 listQuery 对 this.rooms 进行过滤和分页
      // ...
    }
  }
}
```

## 6. Dashboard 面板

Dashboard (`src/views/dashboard/admin/index.vue`) 已适配酒店业务，包含：
- **核心指标卡片**: 今日入住、可用客房、今日收入、客房总数。
- **营收趋势图**: 近7天营收曲线 (LineChart)。
- **最新交易**: 最新8笔订单列表 (TransactionTable)。
- **客房状态分布**: 空闲/入住/维护 比例饼图 (PieChart)。
- **房型分布**: 各房型数量柱状图 (BarChart)。

## 7. 注意事项

- **RESTful 规范**: 前端请求方法需严格遵循后端接口文档（GET/POST/PATCH/DELETE）。
- **样式规范**: 尽量使用 Element UI 提供的布局和组件，保持风格统一。
- **本地化**: 所有界面文本、验证提示均已汉化。
